Here we should have the state diagram.